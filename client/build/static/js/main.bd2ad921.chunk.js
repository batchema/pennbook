(this.webpackJsonppennbook=this.webpackJsonppennbook||[]).push([[0],{239:function(e,t,n){},240:function(e,t,n){},307:function(e,t,n){},308:function(e,t,n){},340:function(e,t,n){},408:function(e,t,n){},449:function(e,t,n){},458:function(e,t,n){},459:function(e,t,n){},548:function(e,t,n){},550:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(0),a=n.n(o),s=n(24),r=n.n(s),i=(n(307),n(9)),l=n(26),u=n(38),h=n(299),d=n(106),j=n(63),p=n(555),f=n(556),m=n(560),b=n(74),O=n(562),x=n(563),g=n(557),S=(n(308),function(){return Object(c.jsxs)(g.a,{style:{width:"100%",height:"50px"},mode:"horizontal",children:[Object(c.jsx)(g.a.Item,{className:"no-pointer",disabled:!0,children:Object(c.jsx)("h1",{children:"PennBook"})}),Object(c.jsxs)(g.a.Item,{className:"no-pointer",style:{float:"right"},children:[Object(c.jsx)(b.a,{style:{marginRight:"8px"},children:Object(c.jsx)(l.b,{to:"/signup",children:"Sign Up"})}),Object(c.jsx)(b.a,{type:"primary",children:Object(c.jsx)(l.b,{to:"/",children:"Login"})})]})]})}),y=Object(o.createContext)();function T(){return Object(o.useContext)(y)}var N="54.89.147.27:80",k=(n(340),function(){var e=T().setAuth,t=Object(o.useState)({username:"",password:""}),n=Object(i.a)(t,2),a=n[0],s=n[1],r=function(e,t){a[e]=t.target.value,s(a)},l=Object(u.g)();return Object(c.jsxs)("div",{className:"background",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(S,{})}),Object(c.jsxs)(d.a,{style:{marginTop:"50px"},children:[Object(c.jsx)(j.a,{span:14}),Object(c.jsx)(j.a,{span:10,children:Object(c.jsx)(p.a,{className:"form-card",children:Object(c.jsxs)(f.a,{layout:"vertical",children:[Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"Username"}),rules:[{required:!0}],children:Object(c.jsx)(m.a,{prefix:Object(c.jsx)(O.a,{}),onChange:function(e){r("username",e)},name:"username"})}),Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"Password"}),rules:[{required:!0}],children:Object(c.jsx)(m.a.Password,{prefix:Object(c.jsx)(x.a,{}),onChange:function(e){r("password",e)},name:"password"})}),Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(b.a,{onClick:function(){""===a.username||""===a.password?h.b.error("Please fill in all fields."):fetch("http://".concat(N,"/checklogin"),{method:"POST",mode:"cors",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({username:a.username,password:a.password})}).then((function(e){return e.text()})).then((function(t){var n=JSON.parse(t);n.login?(e(n.accessToken),l.push("/home")):h.b.error("Invalid username and password.")}))},type:"primary",htmlType:"submit",children:"Submit"})})]})})})]})]})}),v=n(167),C=n(554),J=n(564),w=n(565),I=n(566),A=["POLITICS","WELLNESS","ENTERTAINMENT","TRAVEL","STYLE & BEAUTY","PARENTING","HEALTHY LIVING","QUEER VOICES","FOOD & DRINK","BUSINESS","COMEDY","SPORTS","BLACK VOICES","HOME & LIVING","PARENTS","THE WORLDPOST","WEDDINGS","WOMEN","IMPACT","DIVORCE","CRIME","MEDIA","WEIRD NEWS","GREEN","WORLDPOST","RELIGION","STYLE","SCIENCE","WORLD NEWS","TASTE","TECH","MONEY","ARTS","FIFTY","GOOD NEWS","ARTS & CULTURE","ENVIRONMENT","COLLEGE","LATINO VOICES","CULTURE & ARTS","EDUCATION"],B=n(93),_=function(e,t){return e.username<t.username?-1:e.username>t.username?1:0},E=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},z=function(e){var t=new Date(0);t.setUTCMilliseconds(e);var n=t.getHours(),c=t.getMinutes(),o=n>12?n%12:0===n?12:n,a=c<10?"0"+c:c,s=n>=12&&n<24?"pm":"am";return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+o+":"+a+s},P=function(e){var t=e.split("-"),n=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]));return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+n.getDate()+", "+n.getFullYear()},G=function(e){var t=e.split("-"),n=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]));return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+n.getDate()+", "+(n.getFullYear()+4)},L=function(e,t,n){var c={username:t,fullname:n},o=Object(B.a)(e),a=o.indexOf(JSON.stringify(c));return o.splice(a,1),o.map((function(e){return JSON.parse(e).fullname})).join(", ")},R=function(e,t,n){for(var c=-1,o=null,a=0;a<e.length;a++)if(e[a]._id===t){c=a,o=e[a];break}var s=Object(B.a)(e);return-1!==c?(s.splice(c,1),o.last_modified=(new Date).getTime(),n&&(o.last_read=(new Date).getTime()),[o].concat(s)):s},D=(n(408),v.a.Option),F=function(){var e=Object(o.useState)({username:"",password:"",firstname:"",lastname:"",email:"",dob:"",interests:[],affiliation:""}),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(u.g)(),r=function(e,t){n[e]="interests"===e?t:"dob"===e?t._d.toLocaleString().split(",")[0]:t.target.value,a(n)};return Object(c.jsxs)("div",{className:"background",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(S,{})}),Object(c.jsxs)(d.a,{style:{marginTop:"50px"},children:[Object(c.jsx)(j.a,{span:14}),Object(c.jsx)(j.a,{span:10,children:Object(c.jsx)(p.a,{className:"form-card",children:Object(c.jsxs)(f.a,{layout:"vertical",children:[Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"Username"}),rules:[{required:!0}],style:{display:"inline-block",padding:"0 8px 0 0",width:"50%"},children:Object(c.jsx)(m.a,{prefix:Object(c.jsx)(O.a,{}),onChange:function(e){r("username",e)},name:"username"})}),Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"Password"}),rules:[{required:!0}],style:{display:"inline-block",padding:"0 8px 0 0",width:"50%"},children:Object(c.jsx)(m.a.Password,{prefix:Object(c.jsx)(x.a,{}),onChange:function(e){r("password",e)},name:"password"})}),Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"First Name"}),rules:[{required:!0}],style:{display:"inline-block",padding:"0 8px 0 0",width:"50%"},children:Object(c.jsx)(m.a,{prefix:Object(c.jsx)(J.a,{}),onChange:function(e){r("firstname",e)},name:"firstname"})}),Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"Last Name"}),rules:[{required:!0}],style:{display:"inline-block",padding:"0 8px 0 0",width:"50%"},children:Object(c.jsx)(m.a,{prefix:Object(c.jsx)(J.a,{}),onChange:function(e){r("lastname",e)},name:"lastname"})}),Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"Email"}),rules:[{required:!0}],style:{display:"inline-block",padding:"0 8px 0 0",width:"50%"},children:Object(c.jsx)(m.a,{prefix:Object(c.jsx)(w.a,{}),onChange:function(e){r("email",e)},name:"email"})}),Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"Date of Birth"}),rules:[{required:!0}],style:{display:"inline-block",padding:"0 8px 0 0",width:"50%"},children:Object(c.jsx)(C.a,{placeholder:"",format:"MM/DD/YYYY",onChange:function(e){r("dob",e)},style:{width:"100%"},name:"dob"})}),Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"Affiliation"}),rules:[{required:!0}],children:Object(c.jsx)(m.a,{prefix:Object(c.jsx)(I.a,{}),onChange:function(e){r("affiliation",e)},name:"affiliation"})}),Object(c.jsx)(f.a.Item,{label:Object(c.jsx)("b",{children:"Interests"}),rules:[{required:!0}],children:Object(c.jsx)(v.a,{mode:"multiple",placeholder:"Select Interests",showSearch:!1,allowClear:!0,onChange:function(e){r("interests",e)},children:A.map((function(e){return Object(c.jsx)(D,{value:e,children:E(e)})}))})}),Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(b.a,{onClick:function(){""===n.username||""===n.password||""===n.firstname||""===n.lastname||""===n.email||""===n.dob||""===n.affiliation?h.b.error("Please fill in all fields."):n.interests.length<2?h.b.error("Please select at least 2 interests."):/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n.email)?fetch("http://".concat(N,"/createaccount"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,password:n.password,firstname:n.firstname,lastname:n.lastname,email:n.email,dob:n.dob,affiliation:n.affiliation,interests:n.interests})}).then((function(e){return e.text()})).then((function(e){null===JSON.parse(e).username?h.b.error("Username already exists."):(h.b.success("Successfully created an account!"),s.push("/login"))})):h.b.error("Please enter a valid email!")},type:"primary",htmlType:"submit",children:"Submit"})})]})})})]})]})},M=n(558),U=n(561),q=n(559),W=n(300),H=n(107),Y=n(575),V=n(576),Z=n(577),K=n(578),Q=n(65),$=n.n(Q),X=n(553),ee=n(567),te=n(568),ne=n(569),ce=(n(449),X.a.Option),oe=Object(u.j)((function(){var e=Object(u.g)(),t=T().setAuth,n=Object(o.useState)([]),a=Object(i.a)(n,2),s=a[0],r=a[1],h=Object(o.useState)(""),d=Object(i.a)(h,2),j=d[0],p=d[1];return Object(c.jsxs)(g.a,{style:{width:"100%",height:"50px"},mode:"horizontal",children:[Object(c.jsx)(g.a.Item,{className:"no-pointer",children:Object(c.jsx)("h1",{children:Object(c.jsx)(l.b,{to:"/home",children:"PennBook"})})}),Object(c.jsxs)(g.a.Item,{className:"no-pointer",disabled:!0,children:[Object(c.jsx)(v.a,{filterOption:!1,mode:"multiple",placeholder:"Find users ...",onSearch:function(e){var t=e.toLowerCase();t&&""!==t?fetch("http://".concat(N,"/getsearchsuggs?prefix=").concat(t),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);console.log(t),r(t.suggs)})):r([])},onSelect:function(e){p(e)},onDeselect:function(e){p(""),r([])},removeIcon:Object(c.jsx)("span",{}),style:{marginBottom:"20px",width:"400px"},maxTagCount:1,children:s.map((function(e){return Object(c.jsx)(ce,{value:e.username,disabled:""!==j&&j!==e.username,children:e.fullname},e.username)}))}),Object(c.jsx)(b.a,{onClick:function(){j&&""!==j&&(e.push("/profile/".concat(j)),p(""))},type:"primary",children:"Search"})]}),Object(c.jsx)(g.a.Item,{style:{float:"right"},className:"no-pointer",disabled:!0,children:Object(c.jsx)(b.a,{type:"primary",onClick:function(){fetch("http://".concat(N,"/logout"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(n){t(""),e.push("/")}))},children:"Logout"})}),Object(c.jsx)(g.a.Item,{style:{float:"right"},children:Object(c.jsxs)(l.b,{to:"/profile",children:[Object(c.jsx)(O.a,{}),"My Profile"]})}),Object(c.jsx)(g.a.Item,{style:{float:"right"},children:Object(c.jsxs)(l.b,{to:"/messages",children:[Object(c.jsx)(ee.a,{}),"Messages"]})}),Object(c.jsx)(g.a.Item,{style:{float:"right"},children:Object(c.jsxs)(l.b,{to:"/visualizer",children:[Object(c.jsx)(te.a,{}),"Visualizer"]})}),Object(c.jsx)(g.a.Item,{style:{float:"right"},children:Object(c.jsxs)(l.b,{to:"/newsfeed",children:[Object(c.jsx)(ne.a,{}),"News Feed"]})}),Object(c.jsx)(g.a.Item,{style:{float:"right"},children:Object(c.jsxs)(l.b,{to:"/home",children:[Object(c.jsx)(I.a,{}),"Home"]})})]})})),ae=n(572),se=n(570),re=n(571),ie=n(573),le=n(574),ue=function(e){var t=Object(u.g)(),n=T().setAuth,a=Object(o.useState)(!1),s=Object(i.a)(a,2),r=s[0],l=s[1],h=Object(o.useState)(e.info.number_of_likes>0?e.info.number_of_likes:0),d=Object(i.a)(h,2),j=d[0],p=d[1];Object(o.useEffect)((function(){fetch("http://".concat(N,"/isCommentLiked?postID=").concat(e.post.post_id,"&postTimestamp=").concat(e.post.timestamp,"&commentTimestamp=").concat(e.info.timestamp),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);l(t.isLiked)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{style:{display:"inline",marginRight:"10px"},children:e.info.commenter_full_name}),Object(c.jsx)("p",{style:{display:"inline"},children:e.info.content}),Object(c.jsxs)("span",{style:{position:"absolute",right:"7.5%"},children:[Object(c.jsx)("span",{style:{display:"inline",fontSize:"10px",color:"#8C8C8C"},children:z(e.info.timestamp)}),Object(c.jsx)(b.a,{style:{border:0,padding:0,lineHeight:"12px",width:"15px",marginLeft:"5px"},icon:r?Object(c.jsx)(se.a,{style:{fontSize:"12px"}}):Object(c.jsx)(re.a,{style:{fontSize:"12px"}}),onClick:function(){var c="http://".concat(N,r?"/unlikecomment":"/likecomment");fetch(c,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({postID:e.post.post_id,postTimestamp:e.post.timestamp,commentTimestamp:e.info.timestamp})}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){console.log(e)})),l(!r),p(r?j-1:j+1)}}),Object(c.jsx)("span",{style:{fontSize:"12px"},children:j})]})]})},he=(n(239),function(e){var t=T().setAuth,n=Object(u.g)(),a=Object(o.useState)(!1),s=Object(i.a)(a,2),r=s[0],h=s[1],d=Object(o.useState)(e.info.num_likes>0?e.info.num_likes:0),j=Object(i.a)(d,2),f=j[0],O=j[1],x=Object(o.useState)(""),g=Object(i.a)(x,2),S=g[0],y=g[1],k=Object(o.useState)([]),v=Object(i.a)(k,2),C=v[0],J=v[1],w=Object(o.useState)(!1),I=Object(i.a)(w,2),A=I[0],B=I[1];Object(o.useEffect)((function(){fetch("http://".concat(N,"/isPostLiked?postID=").concat(e.info.post_id,"&postTimestamp=").concat(e.info.timestamp),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(t(""),n.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);h(t.isLiked)})),fetch("http://".concat(N,"/commentsonpost?postID=").concat(e.info.post_id,"&postTimestamp=").concat(e.info.timestamp),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(t(""),n.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);J(t.success.Items)}))}),[]);return Object(c.jsx)(p.a,{className:"post",children:Object(c.jsxs)("div",{children:[e.status?Object(c.jsx)("h3",{style:{marginBottom:0},children:Object(c.jsx)(l.b,{className:"name",href:"/profile/".concat(e.info.poster),children:e.info.poster_full_name})}):Object(c.jsxs)("h3",{style:{marginBottom:0},children:[Object(c.jsx)(l.b,{className:"name",href:"/profile/".concat(e.info.poster),children:e.info.poster_full_name})," ",Object(c.jsx)(ae.a,{})," ",Object(c.jsx)(l.b,{className:"name",href:"/profile/".concat(e.info.postee),children:e.info.postee_full_name})]}),Object(c.jsx)("p",{style:{fontSize:"12px",color:"#8C8C8C"},children:z(e.info.timestamp)}),Object(c.jsx)("p",{children:e.info.content}),Object(c.jsx)(b.a,{style:{border:0},icon:r?Object(c.jsx)(se.a,{}):Object(c.jsx)(re.a,{}),onClick:function(){var c="http://".concat(N,r?"/unlikepost":"/likepost");fetch(c,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({postID:e.info.post_id,postTimestamp:e.info.timestamp})}).then((function(e){return e.ok||(t(""),n.push("/")),e})).then((function(e){return e.text()})).then((function(e){console.log(e)})),h(!r),O(r?f-1:f+1)}})," ",f," ",1===f?"Like":"Likes",Object(c.jsx)(b.a,{style:{border:0,marginLeft:"5px"},icon:A?Object(c.jsx)(ie.a,{}):Object(c.jsx)(le.a,{}),onClick:function(){B(!A)}})," ",C.length," ",1===C.length?"Comment":"Comments",A?Object(c.jsxs)("div",{className:"comments",children:[Object(c.jsx)("hr",{}),C.map((function(t){return Object(c.jsx)(ue,{post:e.info,info:t})})),Object(c.jsxs)("div",{style:{width:"100%",lineHeight:1.1},children:[Object(c.jsx)(m.a,{style:{marginTop:"10px",width:"80%",border:0,borderBottom:"1px solid lightgrey"},placeholder:"Add comment ...",onChange:function(e){y(e.target.value)}}),Object(c.jsx)(b.a,{style:{lineHeight:1.1,width:"20%",border:0},onClick:function(){var c={timestamp:(new Date).getTime(),commenter_username:e.currentUser.user,commenter_full_name:e.currentUser.fullname,content:S};J((function(e){return e.concat(c)})),console.log(S),fetch("http://".concat(N,"/comment"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({postID:e.info.post_id,postTimestamp:e.info.timestamp,content:S})}).then((function(e){return e.ok||(t(""),n.push("/")),e})).then((function(e){return e.text()})).then((function(e){console.log(e)}))},children:"Add"})]})]}):Object(c.jsx)("span",{})]})})}),de=m.a.TextArea,je=v.a.Option,pe=$()("http://".concat(N)),fe=function(){var e=T().setAuth,t=Object(u.i)().username,n=Object(u.h)(),a=Object(u.g)(),s=Object(o.useState)({}),r=Object(i.a)(s,2),f=r[0],g=r[1],S=Object(o.useState)(!1),y=Object(i.a)(S,2),k=y[0],C=y[1],J=Object(o.useState)(!1),w=Object(i.a)(J,2),I=w[0],B=w[1],_=Object(o.useState)(!1),z=Object(i.a)(_,2),P=z[0],G=z[1],L=Object(o.useState)(!1),R=Object(i.a)(L,2),D=R[0],F=R[1],Q=Object(o.useState)({newAffiliation:"",newEmail:"",oldPassword:"",newPassword:"",newInterests:[]}),$=Object(i.a)(Q,2),X=$[0],ee=$[1],te=Object(o.useState)(""),ne=Object(i.a)(te,2),ce=ne[0],ae=ne[1],se=Object(o.useState)([]),re=Object(i.a)(se,2),ie=re[0],le=re[1],ue=Object(o.useState)(0),fe=Object(i.a)(ue,2),me=fe[0],be=fe[1],Oe=Object(o.useState)([]),xe=Object(i.a)(Oe,2),ge=xe[0],Se=xe[1],ye=Object(o.useState)([]),Te=Object(i.a)(ye,2),Ne=Te[0],ke=Te[1],ve=Object(o.useState)({username:"",email:"",dob:"",affiliation:"",interests:[],firstname:"",lastname:""}),Ce=Object(i.a)(ve,2),Je=Ce[0],we=Ce[1];Object(o.useEffect)((function(){pe.on("connect",(function(){pe.emit("userConnect","im connected"),fetch("http://".concat(N,"/loggedin"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(t){var n=JSON.parse(t);g(n),fetch("http://".concat(N,"/getchats"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);pe.emit("joinRooms",{username:n.user,chats:t.chats})}))}))})),pe.on("message",(function(e){h.b.info(Object(c.jsxs)("span",{children:[e.sender," sent you a message"]}))}))}),[]),Object(o.useEffect)((function(){var n=t?"http://".concat(N,"/accountdetails?username=").concat(t):"http://".concat(N,"/accountdetails");fetch(n,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);null===t.username?(a.push("/profile"),h.b.error("User does not exist.")):(we(t),le(t.interests))}));var c=t?"http://".concat(N,"/getallpostsandstatuswall?username=").concat(t):"http://".concat(N,"/getallpostsandstatuswall");fetch(c,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);Se(t.content)}));var o=t?"http://".concat(N,"/getcurrentfriends?username=").concat(t):"http://".concat(N,"/getcurrentfriends");fetch(o,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);ke(t.status)})),t&&fetch("http://".concat(N,"/getfriendshipstatus?usernameB=").concat(t),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);"outgoing request to B"===t.status?be(3):"incoming request from B"===t.status?be(2):"friends"===t.status?be(1):"not friends"===t.status&&be(0)}))}),[n]);var Ie=function(e,t){X[e]="newInterests"===e?t:t.target.value,ee(X)};return Object(c.jsxs)("div",{className:"background",children:[Object(c.jsx)(M.a,{title:"Change Affiliation",visible:k,onOk:function(){C(!1),fetch("http://".concat(N,"/changeaffiliation"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({affiliation:X.newAffiliation})}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)}));var t=Je;t.affiliation=X.newAffiliation,we(t)},onCancel:function(){C(!1)},children:Object(c.jsx)(m.a,{placeholder:"New Affiliation",onChange:function(e){Ie("newAffiliation",e)}})}),Object(c.jsx)(M.a,{title:"Change Email",visible:I,onOk:function(){B(!1),fetch("http://".concat(N,"/changeemail"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({email:X.newEmail})}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)}));var t=Je;t.email=X.newEmail,we(t)},onCancel:function(){B(!1)},children:Object(c.jsx)(m.a,{placeholder:"New Email",onChange:function(e){Ie("newEmail",e)}})}),Object(c.jsx)(M.a,{title:"Change Interests",visible:P,onOk:function(){G(!1),fetch("http://".concat(N,"/changeinterests"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({oldInterests:ie,newInterests:X.newInterests})}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)}));var t=Je;t.interests=X.newInterests,we(t)},onCancel:function(){G(!1)},children:Object(c.jsx)(v.a,{mode:"multiple",showSearch:!1,allowClear:!0,onChange:function(e){Ie("newInterests",e)},style:{width:"100%"},defaultValue:Je.interests,children:A.map((function(e){return Object(c.jsx)(je,{value:e,children:E(e)})}))})}),Object(c.jsxs)(M.a,{title:"Change Password",visible:D,onOk:function(){F(!1),fetch("http://".concat(N,"/changepassword"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({oldPassword:X.oldPassword,newPassword:X.newPassword})}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)}))},onCancel:function(){F(!1)},children:[Object(c.jsx)(m.a,{placeholder:"Old Password",onChange:function(e){Ie("oldPassword",e)}}),Object(c.jsx)(m.a,{placeholder:"New Password",onChange:function(e){Ie("newPassword",e)}})]}),Object(c.jsx)(d.a,{children:Object(c.jsx)(oe,{})}),Object(c.jsxs)(d.a,{style:{marginTop:"50px"},children:[Object(c.jsx)(j.a,{span:2}),Object(c.jsx)(j.a,{span:7,children:Object(c.jsxs)(U.a,{offsetTop:20,children:[Object(c.jsxs)(p.a,{className:"profile-card",children:[Object(c.jsx)(q.a,{style:{display:"block",margin:"auto"},size:80,icon:Object(c.jsx)(O.a,{})}),t?Object(c.jsxs)("div",{className:"profile-info",children:[Object(c.jsx)("h1",{children:Je.firstname+" "+Je.lastname}),Object(c.jsx)("p",{children:Je.affiliation}),Object(c.jsx)("p",{children:Je.email}),Object(c.jsx)("div",{children:Je.interests.map((function(e){return Object(c.jsx)(W.a,{color:"blue",children:E(e)})}))}),Object(c.jsx)("br",{}),0===me?Object(c.jsx)(b.a,{icon:Object(c.jsx)(Y.a,{}),onClick:function(){fetch("http://".concat(N,"/addfriend"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({usernameB:t,userB_full_name:Je.firstname+" "+Je.lastname})}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e),be(3)}))},type:"primary",children:"Add Friend"}):1===me?Object(c.jsx)(b.a,{style:{width:"200px",backgroundColor:"#52C41A",color:"white",border:0},icon:Object(c.jsx)(O.a,{}),type:"primary",children:"Friends"}):2===me?Object(c.jsx)(b.a,{style:{width:"200px"},icon:Object(c.jsx)(Y.a,{}),onClick:function(){fetch("http://".concat(N,"/acceptfriend"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({usernameB:t,userB_full_name:Je.firstname+" "+Je.lastname})}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e),be(1)}))},type:"primary",children:"Accept Friend Request"}):3===me?Object(c.jsx)(b.a,{icon:Object(c.jsx)(V.a,{}),type:"primary",disabled:!0,children:"Friend Request Sent"}):Object(c.jsx)("span",{}),Object(c.jsx)("br",{}),2===me?Object(c.jsx)(b.a,{style:{width:"200px",marginTop:"5px"},icon:Object(c.jsx)(Z.a,{}),onClick:function(){fetch("http://".concat(N,"/rejectfriend"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({usernameB:t})}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e),be(0)}))},type:"primary",danger:!0,children:"Reject Friend Request"}):Object(c.jsx)("span",{}),1===me?Object(c.jsx)(b.a,{style:{width:"200px",marginTop:"5px"},icon:Object(c.jsx)(Z.a,{}),onClick:function(){fetch("http://".concat(N,"/removefriend"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({usernameB:t})}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e),be(0)}))},type:"primary",danger:!0,children:"Remove Friend"}):Object(c.jsx)("span",{})]}):Object(c.jsxs)("div",{className:"profile-info",children:[Object(c.jsx)("h1",{children:Je.firstname+" "+Je.lastname}),Object(c.jsxs)("p",{children:[Je.affiliation," ",Object(c.jsx)(b.a,{style:{border:"0px"},icon:Object(c.jsx)(K.a,{}),onClick:function(){C(!0)}})]}),Object(c.jsxs)("p",{children:[Je.email," ",Object(c.jsx)(b.a,{style:{border:"0px"},icon:Object(c.jsx)(K.a,{}),onClick:function(){B(!0)}})]}),Object(c.jsx)("div",{children:Je.interests.map((function(e){return Object(c.jsx)(W.a,{color:"blue",children:E(e)})}))}),Object(c.jsx)(b.a,{style:{border:"0px"},icon:Object(c.jsx)(K.a,{}),onClick:function(){G(!0)}}),Object(c.jsx)("br",{}),Object(c.jsx)(b.a,{icon:Object(c.jsx)(x.a,{}),onClick:function(){F(!0)},children:"Change Password"})]})]}),Object(c.jsxs)(p.a,{style:{textAlign:"center"},className:"profile-card",children:[Object(c.jsx)("h2",{children:"Friends"}),Ne.map((function(e){return Object(c.jsx)(l.b,{to:"/profile/".concat(e.friendB),style:{margin:0,display:"block"},children:e.friendB_full_name})}))]})]})}),Object(c.jsx)(j.a,{span:1}),Object(c.jsxs)(j.a,{span:11,children:[Object(c.jsxs)(p.a,{className:"profile-post",children:[Object(c.jsx)(de,{placeholder:"What's on your mind?",showCount:!0,maxLength:500,value:ce,onChange:function(e){ae(e.target.value)}}),Object(c.jsx)(b.a,{type:"primary",onClick:function(){ae(""),console.log(f);var n=[{poster:f.user,postee:t||f.user,poster_full_name:f.fullname,postee_full_name:t?Je.firstname+" "+Je.lastname:f.fullname,content:ce,num_likes:0,num_comments:0,timestamp:(new Date).getTime()}].concat(ge);Se(n);var c=t?{postee:t,postee_full_name:Je.firstname+" "+Je.lastname,content:ce}:{content:ce};fetch("http://".concat(N,"/makenewpost"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify(c)}).then((function(t){return t.ok||(e(""),a.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)}))},children:"Post"})]}),ge.length>0?ge.map((function(e){return e.postee===e.poster?Object(c.jsx)(he,{info:e,status:!0}):Object(c.jsx)(he,{info:e,status:!1})})):Object(c.jsx)(p.a,{className:"profile-post",children:Object(c.jsx)(H.a,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",description:"No Posts"})})]}),Object(c.jsx)(j.a,{span:4})]})]})},me=n(579),be=n(580),Oe=n(581),xe=n(582),ge=(n(458),v.a.Option),Se=$()("http://".concat(N)),ye=function(){var e=T().setAuth,t=Object(u.i)().chatid,n=Object(u.g)(),a=Object(u.h)(),s=Object(o.useState)({}),r=Object(i.a)(s,2),l=r[0],f=r[1],O=Object(o.useState)(""),x=Object(i.a)(O,2),g=x[0],S=x[1],y=Object(o.useState)(""),k=Object(i.a)(y,2),C=k[0],J=k[1],w=Object(o.useState)([]),I=Object(i.a)(w,2),A=I[0],E=I[1],P=Object(o.useState)([]),G=Object(i.a)(P,2),D=G[0],F=G[1],U=Object(o.useState)([]),q=Object(i.a)(U,2),W=q[0],H=q[1],K=Object(o.useState)(!1),Q=Object(i.a)(K,2),$=Q[0],X=Q[1],ee=Object(o.useState)(""),te=Object(i.a)(ee,2),ne=te[0],ce=te[1],ae=Object(o.useState)([]),se=Object(i.a)(ae,2),re=se[0],ie=se[1],le=Object(o.useState)(!1),ue=Object(i.a)(le,2),he=ue[0],de=ue[1],je=Object(o.useState)(""),pe=Object(i.a)(je,2),fe=pe[0],ye=pe[1],Te=Object(o.useState)(!0),Ne=Object(i.a)(Te,2),ke=Ne[0],ve=Ne[1],Ce=Object(o.useState)(!1),Je=Object(i.a)(Ce,2),we=Je[0],Ie=Je[1],Ae=Object(o.useState)(!1),Be=Object(i.a)(Ae,2),_e=Be[0],Ee=Be[1],ze=Object(o.useState)([]),Pe=Object(i.a)(ze,2),Ge=Pe[0],Le=Pe[1],Re=Object(o.useState)(""),De=Object(i.a)(Re,2),Fe=De[0],Me=De[1],Ue=Object(o.useState)([]),qe=Object(i.a)(Ue,2),We=qe[0],He=qe[1],Ye=Object(o.useState)({}),Ve=Object(i.a)(Ye,2),Ze=Ve[0],Ke=Ve[1];Object(o.useEffect)((function(){Se.on("connect",(function(){Se.emit("userConnect","im connected"),fetch("http://".concat(N,"/loggedin"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(t){var c=JSON.parse(t);Ke(c),fetch("http://".concat(N,"/getchats"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);E(t.chats),Se.emit("joinRooms",{username:c.user,chats:t.chats})}))}))})),Se.on("message",(function(e){f(e)}))}),[]),Object(o.useEffect)((function(){fetch("http://".concat(N,"/loggedin"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);Ke(t)})),fetch("http://".concat(N,"/getchats"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);E(t.chats)})),fetch("http://".concat(N,"/getcurrentfriends"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);H(t.status)}))}),[a]),Object(o.useEffect)((function(){if(""!==t&&l._id===t){F((function(e){return e.concat(l)}));var e=R(A,l._id,!0);E(e)}else{var n=R(A,l._id,!1);E(n)}}),[t,l]),Object(o.useEffect)((function(){if(t){console.log("here!"),console.log(t);var c=function(e,t){for(var n=Object(B.a)(e),c=0;c<n.length;c++)if(n[c]._id===t){n[c].last_read=(new Date).getTime();break}return n}(A,t);E(c),F([]),S(""),fetch("http://".concat(N,"/getchat?_id=").concat(t),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);J(t.chat)})),fetch("http://".concat(N,"/getmessages?_id=").concat(t),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);F(t.messages)})),fetch("http://".concat(N,"/readchat"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({_id:t})}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)}))}}),[t]);var Qe=function(e){var t=JSON.parse(e.currentTarget.value);n.push("/messages/".concat(t._id))};return Object(c.jsxs)("div",{className:"background",children:[Object(c.jsx)(M.a,{title:"New Chat",visible:we,onOk:function(){if(void 0===Fe||""===Fe)return Me(""),void Ie(!1);var t={username:Ze.user,fullname:Ze.fullname};fetch("http://".concat(N,"/newchat"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({members:[JSON.stringify(t),Fe]})}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)})),Me(""),Ie(!1)},onCancel:function(){Ie(!1)},children:Object(c.jsx)(v.a,{showSearch:!1,allowClear:!0,onChange:function(e){Me(e)},style:{width:"100%"},children:Ge.map((function(e){var t=JSON.parse(e);return Object(c.jsx)(ge,{value:e,children:t.fullname})}))})}),Object(c.jsx)(M.a,{title:"New Group Chat",visible:_e,onOk:function(){if(void 0===We||We===[])return He([]),void Ee(!1);if(We.length<2)h.b.error("You must select at least two users.");else{var t={username:Ze.user,fullname:Ze.fullname};fetch("http://".concat(N,"/newchat"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({members:We.concat(JSON.stringify(t))})}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)})),He([]),Ee(!1)}},onCancel:function(){Ee(!1)},children:Object(c.jsx)(v.a,{mode:"multiple",showSearch:!1,allowClear:!0,onChange:function(e){console.log(e),He(e)},style:{width:"100%"},children:W.map((function(e){return Object(c.jsx)(ge,{value:JSON.stringify({username:e.friendB,fullname:e.friendB_full_name}),children:e.friendB_full_name})}))})}),Object(c.jsx)(M.a,{title:"Add User to Chat",visible:$,onOk:function(){if(void 0===ne||""===ne)return ce(""),void X(!1);var t=JSON.parse(ne);fetch("http://".concat(N,"/adduser"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({_id:C._id,members:C.members,username:t.username,fullname:t.fullname})}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)})),ce(""),X(!1)},onCancel:function(){X(!1)},children:Object(c.jsx)(v.a,{showSearch:!1,allowClear:!0,onChange:function(e){ce(e)},style:{width:"100%"},children:re.map((function(e){var t=JSON.parse(e);return Object(c.jsx)(ge,{value:e,children:t.fullname})}))})}),Object(c.jsx)(M.a,{title:"Remove User from Chat",visible:he,onOk:function(){if(void 0===fe||""===fe)return ye(""),void de(!1);var t=JSON.parse(fe);fetch("http://".concat(N,"/removeuser"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({_id:C._id,members:C.members,username:t.username,fullname:t.fullname})}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)})),ye(""),de(!1)},onCancel:function(){de(!1)},children:Object(c.jsx)(v.a,{showSearch:!1,allowClear:!0,onChange:function(e){ye(e)},style:{width:"100%"},children:C.members?C.members.map((function(e){var t=JSON.parse(e);return Object(c.jsx)(ge,{value:e,children:t.fullname})})):Object(c.jsx)("span",{})})}),Object(c.jsx)(d.a,{children:Object(c.jsx)(oe,{})}),Object(c.jsxs)(d.a,{style:{height:"calc(100vh - 50px)",overflowY:"hidden"},children:[Object(c.jsxs)(j.a,{style:{backgroundColor:"white",overflow:"scroll",height:"100vh",borderRight:"1px solid #F0F0F0"},span:6,children:[Object(c.jsxs)(p.a,{style:{height:"75px"},children:[Object(c.jsx)("h2",{style:{display:"inline-block",width:"70%"},children:"Chats"}),Object(c.jsx)(b.a,{style:{borderRadius:"50%",position:"absolute",right:60},onClick:function(){var e=function(e,t,n,c){var o={username:n,fullname:c},a=e.map((function(e){return JSON.stringify({username:e.friendB,fullname:e.friendB_full_name})})),s=t.map((function(e){if(!e.is_group){var t=Object(B.a)(e.members),n=t.indexOf(JSON.stringify(o));return t.splice(n,1),t[0]}})),r=new Set(a),i=new Set(s),l=new Set(Object(B.a)(r).filter((function(e){return!i.has(e)}))),u=Array.from(l);return u.sort(_),u}(W,A,Ze.user);Le(e),Ie(!0)},icon:Object(c.jsx)(me.a,{})}),Object(c.jsx)(b.a,{style:{borderRadius:"50%",position:"absolute",right:20},onClick:function(){Ee(!0)},icon:Object(c.jsx)(be.a,{})})]}),A.map((function(e){return Object(c.jsx)(p.a,{style:{height:"75px",border:0},children:e.last_modified>e.last_read?Object(c.jsxs)("div",{style:{width:"100%"},children:[Object(c.jsx)(b.a,{style:{fontWeight:"bold",border:0,width:"50%",textAlign:"left",padding:0},value:JSON.stringify(e),onClick:Qe,children:L(e.members,Ze.user,Ze.fullname)}),Object(c.jsx)("span",{style:{fontWeight:"bold",position:"absolute",right:20,fontSize:"10px",color:"#8C8C8C",marginTop:"7.5px"},children:z(e.last_modified)})]}):Object(c.jsxs)("div",{style:{width:"100%"},children:[Object(c.jsx)(b.a,{style:{border:0,width:"50%",textAlign:"left",padding:0},value:JSON.stringify(e),onClick:Qe,children:L(e.members,Ze.user,Ze.fullname)}),Object(c.jsx)("span",{style:{position:"absolute",right:20,fontSize:"10px",color:"#8C8C8C",marginTop:"7.5px"},children:z(e.last_modified)})]})})}))]}),Object(c.jsx)(j.a,{span:18,children:""!==t&&t&&C?Object(c.jsxs)("div",{children:[Object(c.jsx)(d.a,{children:Object(c.jsxs)(p.a,{id:"messageTitle",style:{width:"100%",height:"75px"},children:[L(C.members,Ze.user,Ze.fullname),Object(c.jsx)(b.a,{style:{position:"absolute",right:20,border:0},icon:ke?Object(c.jsx)(Oe.a,{style:{fontSize:"18px"}}):Object(c.jsx)(xe.a,{style:{color:"#8C8C8C",fontSize:"18px"}}),onClick:function(){ve(!ke)}})]})}),Object(c.jsxs)(d.a,{children:[Object(c.jsxs)(j.a,{span:ke?18:24,children:[Object(c.jsx)(d.a,{style:{backgroundColor:"white",height:"calc(100vh - 170px)",overflowY:"scroll"},children:Object(c.jsx)("div",{className:"message-container",children:D.map((function(e){return e.sender===Ze.user?Object(c.jsxs)("div",{className:"message2-bubble",children:[Object(c.jsx)("span",{className:"message2",children:e.content}),Object(c.jsx)("span",{className:"message2-time",children:z(e.timestamp)})]}):Object(c.jsxs)("div",{className:"message1-bubble",children:[C.is_group?Object(c.jsx)("p",{style:{marginTop:"5px"},className:"message1-sender",children:e.sender_full_name}):Object(c.jsx)("span",{}),Object(c.jsx)("span",{style:C.is_group?{marginTop:0}:{},className:"message1",children:e.content}),Object(c.jsx)("span",{className:"message1-time",children:z(e.timestamp)})]})}))})}),Object(c.jsxs)(d.a,{style:{backgroundColor:"white",height:"80px",marginBottom:"10px"},children:[Object(c.jsx)(j.a,{style:{height:"80px"},span:22,children:Object(c.jsx)(m.a,{style:{width:"100%",margin:"0 0 0 15px",borderRadius:"20px",height:"35px"},value:g,onChange:function(e){S(e.target.value)},placeholder:"Type a message ..."})}),Object(c.jsx)(j.a,{span:2,children:Object(c.jsx)(b.a,{style:{position:"absolute",left:20,height:"35px",border:0},onClick:function(){console.log(g),S(""),Se.emit("message",{sender:Ze.user,sender_full_name:Ze.fullname,content:g,_id:t,timestamp:(new Date).getTime()}),fetch("http://".concat(N,"/sendmessage"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({_id:C._id,content:g,members:C.members})}).then((function(t){return t.ok||(e(""),n.push("/")),t})).then((function(e){return e.text()})).then((function(e){console.log(e)}))},icon:Object(c.jsx)(V.a,{})})})]})]}),Object(c.jsx)(j.a,{span:6,style:{borderLeft:"1px solid #F0F0F0"},children:""!==t&&t&&C&&ke?Object(c.jsxs)("div",{style:{backgroundColor:"white",overflow:"hidden",height:"100vh",borderRight:"1px solid black",textAlign:"center"},children:[Object(c.jsx)("h3",{style:{margin:"25px"},children:"Members"}),C.members.map((function(e){var t=JSON.parse(e);return Object(c.jsx)("p",{style:{margin:0},children:t.fullname})})),Object(c.jsx)(b.a,{style:{marginTop:"20px",marginBottom:"5px",width:"150px"},icon:Object(c.jsx)(Y.a,{}),onClick:function(){var e=function(e,t){var n=e.map((function(e){return JSON.stringify({username:e.friendB,fullname:e.friendB_full_name})})),c=new Set(n),o=new Set(t),a=new Set(Object(B.a)(c).filter((function(e){return!o.has(e)}))),s=Array.from(a);return s.sort(_),s}(W,C.members);ie(e),X(!0)},children:"Add User"}),Object(c.jsx)("br",{}),C.is_group&&C.members.length>1?Object(c.jsx)(b.a,{style:{margin:0,width:"150px"},icon:Object(c.jsx)(Z.a,{}),onClick:function(){de(!0)},children:"Remove User"}):Object(c.jsx)("span",{})]}):Object(c.jsx)("span",{})})]})]}):Object(c.jsx)("span",{})})]})]})},Te=n(583),Ne=n(584),ke=(n(240),function(e){var t=T().setAuth,n=Object(u.g)(),a=Object(o.useState)(!1),s=Object(i.a)(a,2),r=s[0],l=s[1],h=Object(o.useState)(0),d=Object(i.a)(h,2),j=d[0],f=d[1];Object(o.useEffect)((function(){var c=e.info.article_id.S?e.info.article_id.S:e.info.article_id;fetch("http://".concat(N,"/isArticleLiked?article_id=").concat(c),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(t(""),n.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);l(t.isLiked)})),fetch("http://".concat(N,"/numlikesarticle?article_id=").concat(c),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(t(""),n.push("/")),e})).then((function(e){return e.text()})).then((function(e){console.log(e);var t=JSON.parse(e);f(t.num_likes)}))}));return Object(c.jsx)(p.a,{className:"news-article",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{style:{marginBottom:0},children:e.info.headline.S?e.info.headline.S:e.info.headline}),Object(c.jsx)("p",{style:{fontStyle:"italic"},children:e.info.authors.S?e.info.authors.S:e.info.authors}),Object(c.jsx)("p",{children:e.info.short_description.S?e.info.short_description.S:e.info.short_description}),Object(c.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:e.info.url?e.info.url:e.info.link.S?e.info.link.S:e.info.link,children:"Read Full Article"}),Object(c.jsx)("span",{style:{float:"right"},children:e.info.date.S?G(e.info.date.S):P(e.info.date)}),Object(c.jsx)(W.a,{color:"blue",style:{float:"right"},children:E(e.info.category.S?e.info.category.S:e.info.category)}),Object(c.jsx)(b.a,{style:{border:0},icon:r?Object(c.jsx)(se.a,{}):Object(c.jsx)(re.a,{}),onClick:function(){var c="http://".concat(N,r?"/unlikearticle":"/likearticle"),o=e.info.article_id.S?e.info.article_id.S:e.info.article_id;fetch(c,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({article_id:o})}).then((function(e){return e.ok||(t(""),n.push("/")),e})).then((function(e){return e.text()})).then((function(e){console.log(e)})),l(!r),f(r?j-1:j+1)}})," ",j," ",1===j?"Like":"Likes"]})})}),ve=(n(459),m.a.TextArea),Ce=$()("http://".concat(N)),Je=function(){var e=Object(u.h)(),t=Object(u.g)(),n=T().setAuth,a=Object(o.useState)([]),s=Object(i.a)(a,2),r=s[0],f=s[1],m=Object(o.useState)([]),O=Object(i.a)(m,2),x=O[0],g=O[1],S=Object(o.useState)([]),y=Object(i.a)(S,2),k=y[0],v=y[1],C=Object(o.useState)(""),J=Object(i.a)(C,2),w=J[0],I=J[1],A=Object(o.useState)({}),B=Object(i.a)(A,2),_=B[0],E=B[1],z=Object(o.useState)([]),P=Object(i.a)(z,2),G=P[0],L=P[1],R=Object(o.useState)([]),D=Object(i.a)(R,2),F=D[0],M=D[1];Object(o.useEffect)((function(){Ce.on("connect",(function(){Ce.emit("userConnect","im connected"),fetch("http://".concat(N,"/loggedin"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){var c=JSON.parse(e);E(c),fetch("http://".concat(N,"/getchats"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);Ce.emit("joinRooms",{username:c.user,chats:t.chats})}))}))})),Ce.on("message",(function(e){h.b.info(Object(c.jsxs)("span",{children:[e.sender," sent you a message"]}))}))}),[]),Object(o.useEffect)((function(){fetch("http://".concat(N,"/loggedin"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);E(t)})),fetch("http://".concat(N,"/getnewfriendships"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);console.log(e),g(t.friends)})),fetch("http://".concat(N,"/getallpostsandstatushome"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);v(t.content)})),fetch("http://".concat(N,"/getpendingrequests"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);f(t.status)})),fetch("http://".concat(N,"/getallonlinefriends"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);L(t.onlineFriends)})),fetch("http://".concat(N,"/get-recommendations"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){console.log(e);var t=function(e){return e.filter((function(e){return e.date.S<"2016-12-16"})).splice(0,2)}(JSON.parse(e).recs);M(t)}))}),[e]);var U=function(e){console.log(e.currentTarget.value);var c=JSON.parse(e.currentTarget.value);fetch("http://".concat(N,"/acceptfriend"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({usernameB:c.friendB,userB_full_name:c.friendB_full_name})}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){console.log(e)}))},q=function(e){console.log(e.currentTarget.value),fetch("http://".concat(N,"/rejectfriend"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({usernameB:e.currentTarget.value})}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){console.log(e)}))},W=function(e){var c=JSON.parse(e.currentTarget.value),o={username:_.user,fullname:_.fullname},a={username:c.friendB,fullname:c.friendB_full_name};fetch("http://".concat(N,"/newchat"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({members:[JSON.stringify(o),JSON.stringify(a)]})}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){var n=JSON.parse(e)._id;h.b.success("New chat created!"),t.push("/messages/".concat(n))}))};return Object(c.jsxs)("div",{className:"background",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(oe,{})}),Object(c.jsxs)(d.a,{style:{marginTop:"50px"},children:[Object(c.jsx)(j.a,{span:1}),Object(c.jsxs)(j.a,{span:5,children:[Object(c.jsx)(p.a,{style:{marginBottom:"20px"},children:Object(c.jsxs)("h2",{style:{textAlign:"center"},children:["Welcome, ",_.fullname,"!"]})}),Object(c.jsxs)(p.a,{style:{textAlign:"center"},children:[Object(c.jsx)("h2",{children:"New Friends"}),x.map((function(e){return Object(c.jsx)(l.b,{href:"/profile/".concat(e.friendB),style:{margin:0,color:"#000000",display:"block"},children:e.friendB_full_name})}))]})]}),Object(c.jsx)(j.a,{span:1}),Object(c.jsxs)(j.a,{span:10,children:[Object(c.jsxs)(p.a,{className:"home-profile-post",children:[Object(c.jsx)(ve,{placeholder:"What's on your mind?",showCount:!0,maxLength:500,value:w,onChange:function(e){I(e.target.value)}}),Object(c.jsx)(b.a,{type:"primary",onClick:function(){I("");var e=[{poster:_.user,postee:_.user,poster_full_name:_.fullname,postee_full_name:_.fullname,content:w,num_likes:0,num_comments:0,timestamp:(new Date).getTime()}].concat(k);v(e),fetch("http://".concat(N,"/makenewpost"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({content:w})}).then((function(e){return e.ok||(n(""),t.push("/")),e})).then((function(e){return e.text()})).then((function(e){console.log(e)}))},children:"Post"})]}),F.map((function(e){return Object(c.jsx)(ke,{info:e})})),k.length>0?k.map((function(e){return e.postee===e.poster?Object(c.jsx)(he,{info:e,currentUser:_,status:!0}):Object(c.jsx)(he,{info:e,currentUser:_,status:!1})})):Object(c.jsx)(p.a,{className:"post",children:Object(c.jsx)(H.a,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",description:"No Posts"})})]}),Object(c.jsx)(j.a,{span:1}),Object(c.jsxs)(j.a,{span:5,children:[Object(c.jsxs)(p.a,{className:"friends-online",style:{marginBottom:"20px"},children:[Object(c.jsx)("h2",{style:{textAlign:"center"},children:"Online Now"}),Object(c.jsx)("div",{children:G.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{className:"friend-name",style:{margin:0},children:[Object(c.jsx)("span",{className:"dot"}),e.friendB_full_name]}),Object(c.jsx)(b.a,{style:{border:0},value:JSON.stringify(e),onClick:W,icon:Object(c.jsx)(ee.a,{})})]})}))})]}),Object(c.jsxs)(p.a,{style:{textAlign:"center"},children:[Object(c.jsx)("h2",{children:"Friend Requests"}),r.map((function(e){return Object(c.jsxs)("p",{style:{margin:0},children:[e.friendB_full_name,Object(c.jsx)(b.a,{style:{border:0,width:"15px",margin:"0 2.5px 0 5px"},value:JSON.stringify(e),onClick:U,icon:Object(c.jsx)(Te.a,{twoToneColor:"#52C41A"})}),Object(c.jsx)(b.a,{style:{border:0,width:"15px",margin:"0 5px 0 2.5px"},value:JSON.stringify(e),onClick:q,icon:Object(c.jsx)(Ne.a,{twoToneColor:"#F5222D"})})]})}))]})]})]})]})},we=n(585),Ie=n(586),Ae=n(587),Be=m.a.Search,_e=$()("http://".concat(N)),Ee=function(){var e=T().setAuth,t=Object(u.g)(),n=Object(o.useState)(!1),a=Object(i.a)(n,2),s=a[0],r=a[1],l=Object(o.useState)([]),f=Object(i.a)(l,2),m=f[0],O=f[1],x=Object(o.useState)(0),g=Object(i.a)(x,2),S=g[0],y=g[1],k=Object(o.useState)([]),v=Object(i.a)(k,2),C=v[0],J=v[1];Object(o.useEffect)((function(){_e.on("connect",(function(){_e.emit("userConnect","im connected"),fetch("http://".concat(N,"/loggedin"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(n){var c=JSON.parse(n);fetch("http://".concat(N,"/getchats"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);_e.emit("joinRooms",{username:c.user,chats:t.chats})}))}))})),_e.on("message",(function(e){h.b.info(Object(c.jsxs)("span",{children:[e.sender," sent you a message"]}))}))}),[]);return Object(c.jsxs)("div",{className:"background",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(oe,{})}),Object(c.jsxs)(d.a,{style:{marginTop:"50px"},children:[Object(c.jsx)(j.a,{span:6}),Object(c.jsxs)(j.a,{span:12,children:[Object(c.jsx)(Be,{className:"news-search",size:"large",placeholder:"Find news articles ...",enterButton:!0,onSearch:function(n){if(""!==n.trim()){var c=n.trim().split(/\s+/);O([]),J(c),r(!0),fetch("http://".concat(N,"/newssearch"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({queries:c,page:0})}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);r(!1),O(t.articles),console.log(t.articles)}))}}}),s?Object(c.jsx)(d.a,{style:{marginTop:"30px"},children:Object(c.jsx)(we.a,{style:{fontSize:"30px",color:"white",margin:"auto"}})}):Object(c.jsx)("span",{}),m.length>0?Object(c.jsxs)("div",{children:[m.map((function(e){return Object(c.jsx)(ke,{info:e})})),Object(c.jsx)(d.a,{children:Object(c.jsxs)("div",{style:{margin:"auto"},children:[Object(c.jsx)(b.a,{style:{margin:"5px"},icon:Object(c.jsx)(Ie.a,{}),onClick:function(){y((function(e){return e-1})),O([]),r(!0),fetch("http://".concat(N,"/newssearch"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({queries:C,page:S-1})}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);r(!1),O(t.articles)}))},disabled:0===S}),Object(c.jsx)(b.a,{style:{margin:"5px"},icon:Object(c.jsx)(Ae.a,{}),onClick:function(){y((function(e){return e+1})),O([]),r(!0),fetch("http://".concat(N,"/newssearch"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))},body:JSON.stringify({queries:C,page:S+1})}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);r(!1),O(t.articles)}))},disabled:m.length<10})]})})]}):s?Object(c.jsx)("span",{}):Object(c.jsx)(p.a,{className:"post",children:Object(c.jsx)(H.a,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",description:"Search For Articles"})})]}),Object(c.jsx)(j.a,{span:6})]})]})},ze=n(290),Pe=n.n(ze),Ge=n(291),Le=$()("http://".concat(N)),Re=function(){var e=T().setAuth,t=Object(u.g)(),n=Object(u.h)(),a=Object(o.useState)(""),s=Object(i.a)(a,2),r=s[0],l=s[1],j=Object(o.useState)({nodes:[],edges:[]}),p=Object(i.a)(j,2),f=p[0],m=p[1];Object(o.useEffect)((function(){console.log("hi"),Le.on("connect",(function(){Le.emit("userConnect","im connected"),fetch("http://".concat(N,"/loggedin"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(n){var c=JSON.parse(n);fetch("http://".concat(N,"/getchats"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);Le.emit("joinRooms",{username:c.user,chats:t.chats})})),fetch("http://".concat(N,"/getcurrentfriends"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e).status,n=[],o=[];n.push({id:0,label:c.fullname,color:"#ff9c6e",font:"12px Helvetica black",borderWidth:0,shape:"circle",user:c.user}),t.forEach((function(e,t){n.push({id:t+1,label:e.friendB_full_name,color:"#9254de",font:"12px Helvetica white",borderWidth:0,shape:"circle",user:e.friendB})})),t.forEach((function(e,t){o.push({from:0,to:t+1})})),m({nodes:n,edges:o})}))}))})),Le.on("message",(function(e){h.b.info(Object(c.jsxs)("span",{children:[e.sender," sent you a message"]}))}))}),[]),Object(o.useEffect)((function(){console.log("hi2"),fetch("http://".concat(N,"/loggedin"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(n){var c=JSON.parse(n);fetch("http://".concat(N,"/getcurrentfriends"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e).status,n=[],o=[];n.push({id:0,label:c.fullname,color:"#ff9c6e",font:"12px Helvetica black",borderWidth:0,shape:"circle",user:c.user}),t.forEach((function(e,t){n.push({id:t+1,label:e.friendB_full_name,color:"#9254de",font:"12px Helvetica white",borderWidth:0,shape:"circle",user:e.friendB})})),t.forEach((function(e,t){o.push({from:0,to:t+1})})),m({nodes:n,edges:o})}))})),fetch("http://".concat(N,"/accountdetails"),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);l(t.affiliation)}))}),[n]);var b={select:function(n){var c=f.nodes,o=f.edges,a=n.nodes[0];if(f.nodes[a]){var s=f.nodes[a].user;console.log("Clicked user: "+s),fetch("http://".concat(N,"/getnewuserstovisualize?affiliation=").concat(r,"&clickedUser=").concat(s),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("accessToken")))}}).then((function(n){return n.ok||(e(""),t.push("/")),n})).then((function(e){return e.text()})).then((function(e){console.log(e),JSON.parse(e).users.forEach((function(e){if(!f.nodes.some((function(t){return t.user===e.friendB}))){var t={id:c.length,label:e.friendB_full_name,user:e.friendB,color:"#9254de",font:"12px Helvetica white",borderWidth:0,shape:"circle"},n={from:a,to:t.id};c.push(t),o.push(n)}})),m({nodes:c,edges:o})}))}}};return Object(c.jsxs)("div",{className:"background",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(oe,{})}),Object(c.jsx)(Pe.a,{style:{width:"1000px",margin:"auto"},graph:f,options:{layout:{hierarchical:!0},edges:{color:"#000000"},height:"600px",width:"1000px"},events:b},Object(Ge.uuid)())]})},De=n(168),Fe=n(298),Me=function(e){var t=e.component,n=Object(Fe.a)(e,["component"]),o=T().auth;return Object(c.jsx)(u.b,Object(De.a)(Object(De.a)({},n),{},{render:function(e){return o?Object(c.jsx)(t,Object(De.a)({},e)):Object(c.jsx)(u.a,{to:"/"})}}))};n(548),n(549);var Ue=function(){var e=JSON.parse(localStorage.getItem("accessToken")),t=Object(o.useState)(e),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(c.jsx)(y.Provider,{value:{auth:a,setAuth:function(e){localStorage.setItem("accessToken",JSON.stringify(e)),s(e)}},children:Object(c.jsxs)(l.a,{children:[Object(c.jsx)("div",{className:"App"}),Object(c.jsxs)(u.d,{children:[Object(c.jsx)(Me,{path:"/home",component:Je}),Object(c.jsx)(Me,{path:"/messages/:chatid",component:ye}),Object(c.jsx)(Me,{path:"/messages",component:ye}),Object(c.jsx)(Me,{path:"/profile/:username",component:fe}),Object(c.jsx)(Me,{path:"/profile",component:fe}),Object(c.jsx)(Me,{path:"/newsfeed",component:Ee}),Object(c.jsx)(Me,{path:"/visualizer",component:Re}),Object(c.jsx)(u.b,{path:"/signup",component:F}),Object(c.jsx)(u.b,{path:"/login",component:k}),Object(c.jsx)(u.b,{path:"/",children:a?Object(c.jsx)(u.a,{to:"/home"}):Object(c.jsx)(u.a,{to:"/login"})})]})]})})},qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,588)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),o(e),a(e),s(e)}))};r.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(Ue,{})}),document.getElementById("root")),qe()}},[[550,1,2]]]);
//# sourceMappingURL=main.bd2ad921.chunk.js.map